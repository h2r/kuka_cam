<?xml version="1.0"?>
<launch>
	<arg name="cam_num" default="1"/>
	<include file="$(find realsense2_camera)/launch/rs_camera.launch">
        <arg name="camera" value="cam_$(arg cam_num)"/>
        <!--Kinda messy (especially the whole environment variable thing), but the cleanest thing I could come up with to get args in a roslaunch-->
        <!--Can't use a .yaml because we need to access the values here-->
        <arg name="serial_no" value="$(eval env('CAM_' + str(cam_num) + '_SERIAL'))" />
        <arg name="filters" value="pointcloud"/> <!-- spatial,temporal,pointcloud"/> -->
    </include>
    <!--static_transform_publisher x y z qx qy qz qw frame_id child_frame_id period_in_ms-->
    <node pkg="tf" type="static_transform_publisher" name="tf_pub_cam_$(arg cam_num)"
    	  args= "$(eval
    	    env('cam_' + str(cam_num) + '_x_pos') + ' ' +
    	    env('cam_' + str(cam_num) + '_y_pos') + ' ' +
    	    env('cam_' + str(cam_num) + '_z_pos') + ' ' +
    	    env('cam_' + str(cam_num) + '_x_rot') + ' ' +
    	    env('cam_' + str(cam_num) + '_y_rot') + ' ' +
    	    env('cam_' + str(cam_num) + '_z_rot') + ' ' +
    	    env('cam_' + str(cam_num) + '_w_rot') + ' ' +
    	    '/world /cam_' + str(cam_num) + '_link 100'
          )"/>
</launch>
